{% extends 'base.html' %}
{% load static %}

{% block content %}
  
  <!-- Main Body begins ----------------------------------------------->
  <main role="main" class="col-12 col-xl-10">
    <div class="container-fluid my-2">

      <div class="row justify-content-center align-items-center my-2">
        <div class="col-12 col-md-6 my-2">
          <h4>Bem vindo, <span class="h4">{{ user.first_name }}!</span> </h4>
          <p class="m-0">Acompanhe de perto sua carteira!</p>
        </div>
        <div class="col-12 col-md-6 my-2 d-flex align-items-center justify-content-md-end">
          <h6>{{weekday}}, {{today}}</h6>
        </div>
      </div>

      <div class="card my-5 border-primary">
        <h5 class="card-header text-bg-primary border-primary ps-md-5">
          Editar Transação
        </h5>
        <div class="card-body px-md-5 mt-2">
          <form method="POST" action="{% url 'edit_transaction' pk=transaction_id %}" enctype="multipart/form-data">
            {% csrf_token %}
  
              <div class="form-row d-flex mb-3 justify-content-center">
                  <div class="form-floating flex-grow-1 me-2">
                  {{edit_transaction_form.date}}
                  <label>Data</label>
                  </div>
  
                  <div class="form-floating flex-grow-1 ms-2">
                  {{edit_transaction_form.ticker}}
                  <label>Ticker</label>
                  </div>
              </div>
              
              <div class="form-row d-flex mb-3 justify-content-center">
                  <div class="form-floating flex-grow-1 me-2">
                  {{edit_transaction_form.operation}}
                  <label>Operação</label>
                  </div>
  
                  <div class="form-floating flex-grow-1 ms-2">
                  {{edit_transaction_form.sort_of}}
                  <label>Tipo</label>
                  </div>
              </div>
  
              <div class="form-row d-flex mb-3 justify-content-center">
                  <div class="form-floating flex-grow-1 me-2">
                  {{edit_transaction_form.quantity}}
                  <label>Quantidade</label>
                  </div>
  
                  <div class="form-floating flex-grow-1 ms-2">
                  {{edit_transaction_form.unit_price}}
                  <label>Preço Unitário</label>
                  </div>
              </div>
  
              <div class="d-flex justify-content-end mt-3 gap-3">
                  <a href="{% url 'transactions' %}" type="button" class="btn btn-outline-secondary">Cancelar</a>
                  <button type="submit" class="btn btn-primary" >Salvar Alterações</button>
              </div>
          </form>
        </div>
      </div>

      <script>
        // O elemento id_date foi nomeado no formulário Django:
        flatpickr("#id_date", {
          altInput: true,
          altFormat: 'j \\de F \\de Y',
          allowInput: true,
          locale: "pt",
          theme: "material_blue",
        });
      </script>

    </div>
  </main>
  <!-- Main Body ends --------------------------------------------->
  

  {% include 'includes/message.html' %}
  
  
  <script src="https://code.jquery.com/jquery-3.7.0.js"></script>
  <script src="https://cdn.datatables.net/1.13.7/js/jquery.dataTables.min.js"></script>
  <link rel="stylesheet" href="{% static 'CSS/custom-datatables.css' %}" />
  
 
  <script src="https://cdn.datatables.net/select/1.7.0/js/dataTables.select.min.js"></script>
  <link rel="stylesheet" href="https://cdn.datatables.net/select/1.7.0/css/select.dataTables.min.css">

  <script src="{% static 'js/transactionsTable.js' %}"></script>
  
{% endblock %}





